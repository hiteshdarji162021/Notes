# What covered in notes

- innerText() vs textContent()
- `check()` / `uncheck()` vs `click()`
- Roles with Examples (header, textbox, img, radio, checkbox)
- `page.$()` and `page.$$()`
- `heading` role is used for **h1 to h6**

## Why learn?

- innerText() vs textContent() ‚Äì To know whether you are validating only visible UI text or including hidden DOM text.
- check() / uncheck() vs click() ‚Äì To control checkbox/radio state safely instead of blindly toggling it.
- Roles (header, textbox, img, radio, checkbox) ‚Äì To locate elements semantically using accessibility, making tests stable and user-centric.
- page.$() and page.$$() ‚Äì To understand low-level DOM access and why it is avoided in favor of stable locators.
- heading role (h1‚Äìh6) ‚Äì To correctly validate page structure using semantic heading levels.


## 1Ô∏è‚É£ `innerText()` vs `textContent()` (WITHOUT first()/last())

This example shows **how hidden text behaves** when you directly read from a locator **without using `first()` or `last()`**.

---

### HTML (hidden + visible text)
```html
<h1 style="display:none">Hidden Header</h1>
<h1>Visible Header</h1>
```

---

### Code (NO first() / last())
```ts
const textContentValue = await page.locator('h1').textContent();
const innerTextValue = await page.locator('h1').innerText();

console.log(textContentValue);
console.log(innerTextValue);
```

---

### Output
```text
textContent() ‚Üí Hidden HeaderVisible Header
innerText()   ‚Üí Visible Header
```

---


### Best Practice

- Use **`innerText()`** for UI assertions
- Use **`textContent()`** only when you need raw DOM text

---
|---|---|---|
| `textContent()` | ‚úÖ YES | ‚ùå No | Reads raw DOM text |
| `innerText()` | ‚ùå NO | ‚úÖ Yes | Reads only visible UI |

‚úÖ **Answer:** Hidden text **is printed by `textContent()`**, not by `innerText()`.

üìå **Best practice:**
- Use `innerText()` for UI assertions
- Use `textContent()` only for debugging or raw DOM checks

---
 (IMPORTANT DIFFERENCE)

### HTML
```html
<h1 style="display:none">Hidden</h1>
<h1>Visible Header</h1>
```

### Code
```ts
const visibleText = await page.locator('h1').last().innerText();
const rawText = await page.locator('h1').last().textContent();
```

### Output
```text
innerText()   ‚Üí Visible Header
textContent() ‚Üí Visible Header
```

### Difference
| Method | Reads | Visibility aware | Use case |
|---|---|---|---|
| `innerText()` | Visible text only | ‚úÖ Yes | UI validation |
| `textContent()` | All text (raw DOM) | ‚ùå No | Debug / data read |

‚úÖ **Best practice:** Use `innerText()` for assertions.

---

## 2Ô∏è‚É£ `check()` / `uncheck()` vs `click()`

### HTML
```html
<input type="checkbox" aria-label="Accept Terms" />
```

### Code
```ts
await page.getByRole('checkbox', { name: 'Accept Terms' }).check();
await page.getByRole('checkbox', { name: 'Accept Terms' }).uncheck();
```

### Output
- Checkbox becomes checked / unchecked safely

### Difference Table
| Action | Purpose | Safe state handling |
|---|---|---|
| `check()` | Ensures checkbox ON | ‚úÖ Yes |
| `uncheck()` | Ensures checkbox OFF | ‚úÖ Yes |
| `click()` | Toggles state blindly | ‚ùå No |

‚ùå Avoid:
```ts
await checkbox.click();
```

‚úÖ **Best practice:** Use `check()` / `uncheck()` for checkbox & radio.

---

## 3Ô∏è‚É£ Roles with Examples (header, textbox, img, radio, checkbox)

### üîπ Header (`heading`)
```html
<h1>My Account</h1>
```
```ts
await page.getByRole('heading', { name: 'My Account' });
```

### üîπ Textbox
```html
<input type="text" aria-label="Email" />
```
```ts
await page.getByRole('textbox', { name: 'Email' }).fill('user@gmail.com');
```

### üîπ Radio
```html
<input type="radio" aria-label="Male" />
```
```ts
await page.getByRole('radio', { name: 'Male' }).check();
```

### üîπ Checkbox
```html
<input type="checkbox" aria-label="Accept Terms" />
```
```ts
await page.getByRole('checkbox', { name: 'Accept Terms' }).check();
```

### üîπ Image (`img`)
```html
<img alt="Company Logo" />
```
```ts
await page.getByRole('img', { name: 'Company Logo' });
```

---

## 4Ô∏è‚É£ `page.$()` and `page.$$()` (LOW-LEVEL API ‚Äì WITH PRACTICAL EXAMPLES)

These methods directly query the DOM and return **ElementHandle**, not Locator.

### Example HTML
```html
<input id="email" />
<input id="password" />
```

### `page.$()` ‚Äì single element
```ts
const email = await page.$('#email');
await email?.fill('user@gmail.com');
```

**Output:** Field is filled if element exists

‚ö†Ô∏è Risk: No auto-wait, fails if element not ready

---

### `page.$$()` ‚Äì multiple elements
```ts
const inputs = await page.$$('input');
console.log(inputs.length);
```

**Output:**
```text
2
```

### Rare use case
```ts
for (const input of inputs) {
  await input.fill('test');
}
```

---

### Why NOT recommended
- No retry
- No auto-wait
- Manual null checks
- Flaky in CI

### Preferred alternative
```ts
await page.locator('input').fill('test');
```

‚úî Auto-wait  ‚úî Retry  ‚úî Stable

---
 `page.$()` and `page.$$()` (LOW‚ÄëLEVEL API)

### Code
```ts
const element = await page.$('#input-email');
const elements = await page.$$('input');
```

### Output
- Returns `ElementHandle`

### Why NOT recommended
| Reason |
|---|
| No auto‚Äëwait |
| More flaky |
| Manual handling needed |

‚ùå Avoid in modern Playwright tests

---

## 5Ô∏è‚É£ Locator vs `$ / $$` (COMPARISON)

| Feature | `locator()` | `$ / $$` |
|---|---|---|
| Auto wait | ‚úÖ Yes | ‚ùå No |
| Retry | ‚úÖ Yes | ‚ùå No |
| Stability | High | Low |
| Recommended | ‚≠ê Yes | ‚ùå No |

---

## 6Ô∏è‚É£ Best Practices (FINAL & MANDATORY)

### Locator priority
1Ô∏è‚É£ `getByTestId()`
2Ô∏è‚É£ `getByRole()`
3Ô∏è‚É£ `getByLabel()`
4Ô∏è‚É£ `getByPlaceholder()`
5Ô∏è‚É£ `getByText()`
‚ùå XPath / `$ / $$`

### Interaction rules
- Use `innerText()` for assertions
- Use `check()` / `uncheck()` for checkbox & radio
- Use `click()` for buttons & links only
- Avoid `$` and `$$`

---

## Important Clarifications (Must Read)

### 1Ô∏è‚É£ `heading` role usage

```ts
await page.getByRole('heading', { name: 'My Account', level: 1 });
```

**Explanation:**
- `heading` role is used for **h1 to h6**
- `level` maps as:
  - h1 ‚Üí level: 1
  - h2 ‚Üí level: 2
  - ...
  - h6 ‚Üí level: 6

---

### 2Ô∏è‚É£ `textContent()` vs `innerText()` (Truth recap)

- `textContent()` ‚Üí returns **visible + hidden text** inside the tag
- `innerText()` ‚Üí returns **only visible text**

---

### 3Ô∏è‚É£ Tags where `getByRole()` is NOT eligible

‚ùå `getByRole()` **does NOT work directly** on:
- `<span>`
- `<div>`
- `<p>`

üëâ These tags have **no implicit ARIA role**.

Use instead:
```ts
page.locator('span');
page.getByText('Some Text');
```

---

### 4Ô∏è‚É£ How `getByRole()` finds elements (VERY IMPORTANT)

`getByRole()` works based on **accessible name**, which can come from:

1Ô∏è‚É£ `<label>` tag text  
2Ô∏è‚É£ `aria-label` attribute  
3Ô∏è‚É£ `placeholder` attribute  
4Ô∏è‚É£ Visible text (for buttons, links, headings)

---

## Architect Golden Rule üèÜ

> **`getByRole()` depends on accessibility, not HTML ids or class names.**

---

### Final Best Practices Summary

- Use `heading + level` for headers
- Use `innerText()` for assertions
- Never expect `getByRole()` to work on `<div>`, `<span>`, `<p>`
- Always think in terms of **accessibility tree**, not DOM tree