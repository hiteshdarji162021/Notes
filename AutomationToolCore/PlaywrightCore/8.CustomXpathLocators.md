# What covered in notes

- xpath


## Why learn?

- Learn XPath so youâ€™re never blockedâ€”use it only when better locators donâ€™t exist.


## What is XPath?

**XPath = address of an element in the DOM (XML/HTML tree).**  
It is powerful but **fragile**, so it should be used **only when better locators are not available**.

---

## 1ï¸âƒ£ Absolute XPath

### XPath
```xpath
/html/body/div[2]/div/div/form/fieldset[1]/div[2]/div/input
```

### Playwright
```ts
page.locator('/html/body/div[2]/div/div/form/fieldset[1]/div[2]/div/input');
```

### Output
- Element is located **only if DOM structure never changes**

### Use case
âŒ **Do NOT use** (breaks on any UI change)

---

## 2ï¸âƒ£ Relative XPath (Custom XPath)

### XPath
```xpath
//input[@id='input-firstname']
```

### Playwright
```ts
await page.locator("//input[@id='input-firstname']").fill('Hitesh');
```

### Output
- First Name field filled

### Use case
- When no stable CSS or `getBy*` exists

---

## 3ï¸âƒ£ Single Attribute XPath

### XPath
```xpath
//input[@id='input-firstname']
```

### Use case
- Fast and readable
- Preferable XPath style

---

## 4ï¸âƒ£ Multiple Attributes XPath

### XPath
```xpath
//input[@id='input-firstname' and @name='firstname' and @placeholder='First Name']
```

### Use case
- When single attribute is not unique

---

## 5ï¸âƒ£ Without Tag (`*`)

### XPath
```xpath
//*[@id='input-firstname']
```

### Output
- Slower match (checks all tags)

### Use case
âš ï¸ Avoid unless tag is unknown

---

## 6ï¸âƒ£ Text Matching using `text()`

### XPath
```xpath
//h1[text()='Register Account']
```

### Playwright
```ts
page.locator("//h1[text()='Register Account']");
```

### Use case
- Headers, labels, links

---

## 7ï¸âƒ£ `contains()` with Attribute

### XPath
```xpath
//input[contains(@placeholder,'Tele')]
//input[contains(@placeholder,'Tele') and @id='input-telephone']
//input[contains(@placeholder,'Tele') and contains(@id,'telephone')]
```

### Use case
- Dynamic attributes

---

## 8ï¸âƒ£ `contains()` with Text

### XPath
```xpath
//h1[contains(text(),'Register')]
//legend[contains(text(),'Details')]
```

### Use case
- Partial visible text

---

## 9ï¸âƒ£ `contains()` with Text + Attribute

### XPath
```xpath
//a[contains(text(),'Forgotten') and contains(@href,'account/forgotten')]
```

### Use case
- Safer link identification

---

## ðŸ”Ÿ `starts-with()` in XPath

### Attribute
```xpath
//input[starts-with(@placeholder,'First')]
```

### Text
```xpath
//h1[starts-with(text(),'Register')]
```

### Use case
- Predictable dynamic values

---

## 1ï¸âƒ£1ï¸âƒ£ Parent â†’ Child

### XPath
```xpath
//aside[@id='column-right']//a[text()='Register']
//footer//a[text()='Terms & Conditions']
```

### Meaning
- `//` â†’ direct + indirect children
- `/` â†’ direct child only

---

## 1ï¸âƒ£2ï¸âƒ£ Child â†’ Immediate Parent

### XPath
```xpath
//input[@id='input-firstname']/..
//input[@id='input-firstname']/parent::div
```

### Use case
- When parent has no unique attribute

---

## 1ï¸âƒ£3ï¸âƒ£ Child â†’ Ancestor

### XPath
```xpath
//a[text()='Login']/ancestor::aside
//input[@id='input-email']/ancestor::form
```

### Use case
- Jump to higher-level container

---

## 1ï¸âƒ£4ï¸âƒ£ Following-Sibling

### XPath
```xpath
//label[@for='input-email']/following-sibling::input
//option[@value='Algeria']/following-sibling::option
```

### Use case
- Relationship-based navigation

---

## 1ï¸âƒ£5ï¸âƒ£ Preceding-Sibling

### XPath
```xpath
//input[@id='input-email']/preceding-sibling::label
//option[@value='Algeria']/preceding-sibling::option[@value='Afghanistan']
```

---

## 1ï¸âƒ£6ï¸âƒ£ Indexing in XPath

### XPath
```xpath
(//input[@class='form-control'])[1]
(//input[@class='form-control'])[position()=1]
(//input[@class='form-control'])[last()]
(//input[@class='form-control'])[last()-3]
```

### Playwright
```ts
await page.locator("(//input[@class='form-control'])[1]").fill('1212');
```

### Use case
âš ï¸ Use only when order is guaranteed

---

## âœ… Best Practices (VERY IMPORTANT)

- âŒ Avoid absolute XPath
- âš ï¸ Avoid indexing XPath when possible
- âœ… Prefer relative XPath with stable attributes
- â­ Prefer `getByTestId()` / `getByRole()` over XPath

---

## Architect Golden Rule ðŸ†

> **XPath is powerful, but power comes with fragilityâ€”use it only as a last resort.**

---