# What covered in notes

- JavaScriptAlertPopUps
- Single file upload
- Multiple file upload
- DynamicFileUpload
- BasicAuthPopUp

## Why learn?
- JavaScript Alert Pop-Ups ‚Äì To handle browser dialogs safely without breaking test execution.
- Single file upload ‚Äì To validate forms that accept documents, images, or reports.
- Multiple file upload ‚Äì To test bulk uploads and real user workflows.
- Dynamic file upload ‚Äì To automate file uploads when file names or paths change at runtime.
- Basic Auth pop-up ‚Äì To access secured applications that use browser-level authentication.
## 1Ô∏è‚É£ JavaScript Alert Pop-Ups

### Types of JS Dialogs
- `alert()`
- `confirm()`
- `prompt()`

---

### ‚úÖ Recommended Approach ‚Äì `page.on('dialog')`

```ts
page.on('dialog', async dialog => {
  console.log(dialog.message());
  await dialog.accept('hitesh darji alert');
  console.log(dialog.type());
});

await page.goto('https://the-internet.herokuapp.com/javascript_alerts');
await page.getByText('Click for JS Alert').click();
await page.getByText('Click for JS Confirm').click();
await page.getByText('Click for JS Prompt').click();

console.log(await page.locator('#result').textContent());
```

### Output
```text
I am a JS Alert
alert
You clicked: Ok
```

### Use case
- Confirmation dialogs
- Browser alerts
- User consent popups

---

### üîÅ ON / OFF Controlled Approach (Advanced)

```ts
const dialogHandler = async (dialog:Dialog) => {
  await dialog.accept('hitesh darji alert');
};

page.on('dialog', dialogHandler);
// test steps
page.off('dialog', dialogHandler);
```

### When to use
- Long-running tests
- Multiple dialogs
- Prevent memory leaks

---

## 2Ô∏è‚É£ Basic Authentication Pop-Up

### Approach 1Ô∏è‚É£ URL-based credentials
```ts
await page.goto('https://admin:admin@the-internet.herokuapp.com/basic_auth');
```

---

### Approach 2Ô∏è‚É£ Dynamic URL credentials
```ts
const username = 'admin';
const password = 'admin';
await page.goto(`https://${username}:${password}@the-internet.herokuapp.com/basic_auth`);
```

---

### ‚úÖ Recommended Approach 3Ô∏è‚É£ Browser Context (Secure)

```ts
const context = await browser.newContext({
  httpCredentials: {
    username: 'admin',
    password: 'admin'
  }
});

const page = await context.newPage();
await page.goto('https://the-internet.herokuapp.com/basic_auth');
```

### Output
```text
Congratulations! You must have the proper credentials.
```

### Use case
- Internal tools
- Legacy systems
- Secure admin panels

---

## 3Ô∏è‚É£ Single File Upload

### Requirement
- `<input type="file">` must exist

### Code
```ts
await page.goto('https://the-internet.herokuapp.com/upload');
await page.locator('#file-upload').setInputFiles('C:/path/file.ts');
await page.locator('#file-submit').click();
```

### Output
```text
File Uploaded!
```

### Use case
- Resume upload
- Profile photo
- Reports upload

---

## 4Ô∏è‚É£ Multiple File Upload

### Requirement
- `multiple` attribute must be present

### Code
```ts
await page.goto('https://davidwalsh.name/demo/multiple-file-upload.php');
await page.locator('#filesToUpload').setInputFiles([
  'file1.ts',
  'file2.ts',
  'file3.ts'
]);
```

### Output
```text
3 files selected
```

### Use case
- Bulk document upload
- Media upload
- Attachments

---

## 5Ô∏è‚É£ Dynamic File Upload (No Physical File)

### Single Dynamic File
```ts
await page.locator('#file-upload').setInputFiles({
  name: 'hitesh.txt',
  mimeType: 'text/plain',
  buffer: Buffer.from('gabbar is back')
});
```

---

### Multiple Dynamic Files
```ts
await page.locator('#filesToUpload').setInputFiles([
  {
    name: 'a.txt',
    mimeType: 'text/plain',
    buffer: Buffer.from('test a')
  },
  {
    name: 'b.txt',
    mimeType: 'text/plain',
    buffer: Buffer.from('test b')
  }
]);
```

### Output
```text
Files uploaded successfully
```

### Use case
- CI/CD pipelines
- Avoid file maintenance
- Runtime-generated data

---

## üèÜ Best Practices (VERY IMPORTANT)

- Always prefer **context-based auth** over URL creds
- Use `page.on('dialog')` for recurring dialogs
- Use dynamic file upload in CI environments
- Never automate OS-level file pickers
- Assert upload success messages

---

## Student Golden Rule üèÜ

> **If the browser handles it, Playwright can automate it ‚Äî safely and cleanly.**

---
